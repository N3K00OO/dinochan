{% extends 'base.html' %}
{% block title %}Manage Venues â€¢ RagaSpace{% endblock %}
{% block content %}
<section class="space-y-8">
  <div class="flex flex-col gap-4 rounded-[2.5rem] border border-white/10 bg-white/5 p-6 shadow-xl shadow-slate-950/40 backdrop-blur-2xl md:flex-row md:items-center md:justify-between">
    <div>
      <h1 class="text-3xl font-semibold text-white">Venue manager</h1>
      <p class="mt-2 text-white/70">Create, update, and curate the venues available for booking.</p>
    </div>
    <a
      href="{% url 'admin-venue-create' %}"
      class="inline-flex items-center justify-center rounded-2xl bg-primary px-5 py-3 text-sm font-semibold text-white shadow-lg shadow-cyan-500/40 transition hover:bg-primary/80"
    >
      Add new venue
    </a>
  </div>

  <div class="overflow-hidden rounded-[2rem] border border-white/10 bg-white/5 backdrop-blur-xl">
    <table class="min-w-full divide-y divide-white/5">
      <thead>
        <tr class="text-left text-xs uppercase tracking-widest text-white/60">
          <th class="px-6 py-4">Name</th>
          <th class="px-6 py-4">City</th>
          <th class="px-6 py-4">Category</th>
          <th class="px-6 py-4">Price/hour</th>
          <th class="px-6 py-4">Actions</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-white/5 text-sm text-white/80">
        {% for venue in venues %}
        <tr class="hover:bg-white/5">
          <td class="px-6 py-4 font-semibold text-white">{{ venue.name }}</td>
          <td class="px-6 py-4">{{ venue.city }}</td>
          <td class="px-6 py-4">{{ venue.category.name }}</td>
          <td class="px-6 py-4">Rp {{ venue.price_per_hour }}</td>
          <td class="px-6 py-4">
            <div class="flex flex-wrap gap-2">
              <a href="{% url 'venue-detail' slug=venue.slug %}" class="rounded-xl border border-white/20 px-3 py-1 text-xs text-white transition hover:bg-white/10">View</a>
              <a href="{% url 'admin-venue-edit' venue.pk %}" class="rounded-xl border border-white/20 px-3 py-1 text-xs text-white transition hover:bg-white/10">Edit</a>
              <form
                method="post"
                action="{% url 'admin-venue-delete' venue.pk %}"
                class="inline"
                onsubmit="return confirm('Are you sure you want to delete this venue?');"
              >
                {% csrf_token %}
                <button
                  type="submit"
                  class="rounded-xl border border-rose-300/40 px-3 py-1 text-xs text-rose-200 transition hover:bg-rose-400/20"
                >
                  Delete
                </button>
              </form>
            </div>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="5" class="px-6 py-6 text-center text-white/70">No venues available yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  {% if is_paginated %}
  <div class="flex justify-between rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm text-white/80 backdrop-blur-xl">
    {% if page_obj.has_previous %}
    <a href="?page={{ page_obj.previous_page_number }}" class="rounded-xl px-3 py-1 transition hover:bg-white/10">Previous</a>
    {% else %}
    <span class="rounded-xl px-3 py-1 text-white/40">Previous</span>
    {% endif %}
    <span>Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>
    {% if page_obj.has_next %}
    <a href="?page={{ page_obj.next_page_number }}" class="rounded-xl px-3 py-1 transition hover:bg-white/10">Next</a>
    {% else %}
    <span class="rounded-xl px-3 py-1 text-white/40">Next</span>
    {% endif %}
  </div>
  {% endif %}
  <p class="text-xs text-white/50">Use the actions above to keep the venue catalogue up to date.</p>
</section>
{% endblock %}
